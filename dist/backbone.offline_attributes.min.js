/*! backbone.offline_attributes v0.0.1 | (c) 2014, 2015 Samuel Sim√µes |  */
!function(a,b){if("function"==typeof define&&define.amd)define(["backbone","underscore"],b);else{if("undefined"!=typeof exports)return module.exports=b(require("backbone"),require("underscore"));b(a.Backbone,a._)}}(this,function(a,b){var c=a.Model;a.Model=c.extend({constructor:function(a,d){c.call(this,a,d);var e=this.currentStoredOfflineAttributes(),f=b.extend({},this.attributes,e);this.set(f),this.on("sync",this.storeOfflineAttributes)},offlineAttributeStorageIdentifier:function(){return this.get("id")},set:function(){var a=c.prototype.set.apply(this,arguments);return this.storeOfflineAttributes(),a},currentStoredOfflineAttributes:function(){var a=this.offlineAttributeStorageIdentifier();return JSON.parse(window.localStorage.getItem(a))||{}},storeOfflineAttributes:function(){if(!this.offlineAttributeStorageIdentifier())return!1;var a=b.pick(this.attributes,this.offlineAttributes),c=this.currentStoredOfflineAttributes();return b.isEqual(a,c)||(b.extend(c,a),window.localStorage.setItem(this.offlineAttributeStorageIdentifier(),JSON.stringify(c))),a}})});
//# sourceMappingURL=backbone.offline_attributes.map